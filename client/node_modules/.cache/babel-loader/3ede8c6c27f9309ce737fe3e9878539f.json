{"ast":null,"code":"import axios from 'axios';\n//типизация всего стора\nimport { ModelUrls } from '../constants/url';\nimport { setAddProductCart } from '../store/reducer/basketReducer'; //типизация товара добавляемого в карзину\n\n// запрос на корзину\nexport const getProductCart = () => {\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await axios.get(ModelUrls.BASKET, {\n        headers: {\n          Authorization: `Bearer ${sessionStorage.getItem('token')}`\n        }\n      });\n      dispatch(setAddProductCart(data.basket, data.totalCount, data.Price));\n      console.log(data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n}; // добавление товара\n\nexport const addProductCart = product => {\n  return async dispatch => {\n    try {\n      await axios.post(ModelUrls.BASKET, product, {\n        headers: {\n          Authorization: `Bearer ${sessionStorage.getItem('token')}`\n        }\n      });\n      getProductCart();\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};","map":{"version":3,"sources":["D:/Fullstack/online-store/client/src/action/basketAction.ts"],"names":["axios","ModelUrls","setAddProductCart","getProductCart","dispatch","data","get","BASKET","headers","Authorization","sessionStorage","getItem","basket","totalCount","Price","console","log","e","addProductCart","product","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEgD;AAChD,SAASC,SAAT,QAA0B,kBAA1B;AACA,SACEC,iBADF,QAGO,gCAHP,C,CAIA;;AAeA;AACA,OAAO,MAAMC,cAAc,GAAG,MAAiB;AAC7C,SAAO,MAAOC,QAAP,IAAoB;AACzB,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAML,KAAK,CAACM,GAAN,CAAUL,SAAS,CAACM,MAApB,EAA4B;AACjDC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgC;AADlD;AADwC,OAA5B,CAAvB;AAKAP,MAAAA,QAAQ,CAACF,iBAAiB,CAACG,IAAI,CAACO,MAAN,EAAcP,IAAI,CAACQ,UAAnB,EAA+BR,IAAI,CAACS,KAApC,CAAlB,CAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;AACD,KARD,CAQE,OAAOY,CAAP,EAAe;AACfF,MAAAA,OAAO,CAACC,GAAR,CAAYC,CAAZ;AACD;AACF,GAZD;AAaD,CAdM,C,CAgBP;;AACA,OAAO,MAAMC,cAAc,GAAIC,OAAD,IAAqC;AACjE,SAAO,MAAOf,QAAP,IAAoB;AACzB,QAAI;AACF,YAAMJ,KAAK,CAACoB,IAAN,CAAWnB,SAAS,CAACM,MAArB,EAA6BY,OAA7B,EAAsC;AAC1CX,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgC;AADlD;AADiC,OAAtC,CAAN;AAKAR,MAAAA,cAAc;AACf,KAPD,CAOE,OAAOc,CAAP,EAAe;AACfF,MAAAA,OAAO,CAACC,GAAR,CAAYC,CAAZ;AACD;AACF,GAXD;AAYD,CAbM","sourcesContent":["import axios from 'axios';\r\nimport { ThunkAction } from 'redux-thunk'; // для типизации санки\r\nimport { RootStateType } from '../store/store'; //типизация всего стора\r\nimport { ModelUrls } from '../constants/url';\r\nimport {\r\n  setAddProductCart,\r\n  SetAddProductCartActionType,\r\n} from '../store/reducer/basketReducer';\r\n//типизация товара добавляемого в карзину\r\nexport type ProductType = {\r\n  name: string;\r\n  price: string;\r\n  picture: string;\r\n  description: string;\r\n  id: string;\r\n};\r\n// типизация санки\r\nexport type ThunkType = ThunkAction<\r\n  Promise<void>,\r\n  RootStateType,\r\n  unknown, //extraArgument\r\n  SetAddProductCartActionType\r\n>;\r\n// запрос на корзину\r\nexport const getProductCart = (): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const { data } = await axios.get(ModelUrls.BASKET, {\r\n        headers: {\r\n          Authorization: `Bearer ${sessionStorage.getItem('token')}`,\r\n        },\r\n      });\r\n      dispatch(setAddProductCart(data.basket, data.totalCount, data.Price));\r\n      console.log(data);\r\n    } catch (e: any) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n\r\n// добавление товара\r\nexport const addProductCart = (product: ProductType): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      await axios.post(ModelUrls.BASKET, product, {\r\n        headers: {\r\n          Authorization: `Bearer ${sessionStorage.getItem('token')}`,\r\n        },\r\n      });\r\n      getProductCart();\r\n    } catch (e: any) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}