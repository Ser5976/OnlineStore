{"ast":null,"code":"import { setIsLoadinDevice, //крутилка для устройств\nsetIsLoadinSelectedDevice, //крутилка для выбранного устройства\nsetIsLoadinTypes, //крутилка для типов\nsetIsLoadinSelectedType, //крутилка для выбранного типа\nsetFetchErrorDevice, //ошибка для устройств\nsetFetchErrorSelectedDevice, //ошибка для выбранного утсройства\nsetFetchErrorTypes, //ошибка для типов\nsetFetchErrorSelectedType, //ошибка для выбранного типа\nsetFetchErrorBrands, //ошибка загрузки брэндов\nsetDevices, // запись устройств в стейт\nsetSelectedDevice, // запись выбранного устройства в стейт\nsetTypes, // запись типов в стейт\nsetSelectedType, //запись выбранного типа устройства в стейт\nsetBrands, // запись брэндов\nsetPageQty, //типизация добавленного устройства\nsetAddedDevice, // запись добавленного устройства в стейт\nsetAddedDeviceError, // изменения статуса ошибки добавленного устройства\nsetAlertMessage // изменения маркера получения сообщения о невозможности удаления типа/брэнда устройства\n} from './../store/reducer/deviceReducer';\nimport axios from 'axios';\n//типизация всего стора\nimport { ModelUrls } from '../constants/url';\n// получение выбранных устройств и запись в стейт\nexport const getDevices = (typeId, brandId, limit, page, name, setPage, history) => {\n  return async dispatch => {\n    try {\n      dispatch(setIsLoadinDevice(true));\n      const response = await axios.get(`${ModelUrls.DEVICES}`, {\n        params: {\n          typeId,\n          brandId,\n          limit,\n          page,\n          name\n        }\n      }); // console.log(response);\n      //если число страниц меньше активной страницы,текущую страницу ставим 1\n\n      if (response.data.pageQty < page) {\n        setPage(1); //записываем текущую страницу в локальный стейт\n\n        history.replace(`${history.location.pathname === '/deleteContainer' ? '/deleteContainer' : `${history.location.pathname}`}?page=1`);\n      } //запись в стейт\n\n\n      dispatch(setDevices(response.data.device));\n      dispatch(setPageQty(response.data.pageQty));\n    } catch (e) {\n      console.log(e);\n      dispatch(setFetchErrorDevice(true));\n      dispatch(setIsLoadinDevice(false));\n    }\n  };\n}; // получение выбранного устройства\n\nexport const getSelectedDevice = id => {\n  //console.log(id);\n  return async dispatch => {\n    try {\n      dispatch(setIsLoadinSelectedDevice(true));\n      const response = await axios.get(ModelUrls.DEVICES + '/' + id); //запись в стейт\n\n      dispatch(setSelectedDevice(response.data));\n    } catch (e) {\n      console.log(e);\n      dispatch(setFetchErrorSelectedDevice(true));\n      dispatch(setIsLoadinSelectedDevice(false));\n    }\n  };\n}; // получение типов устройств и запись в стейт\n\nexport const getTypes = () => {\n  return async dispatch => {\n    try {\n      dispatch(setIsLoadinTypes(true));\n      const response = await axios.get(ModelUrls.TYPES); // console.log(response);\n      //запись в стейт\n\n      dispatch(setTypes(response.data));\n    } catch (e) {\n      console.log(e);\n      dispatch(setFetchErrorTypes(true));\n      dispatch(setIsLoadinTypes(false));\n    }\n  };\n}; // получение типа выбранного устройства\n\nexport const getSelectedType = id => {\n  //console.log(id);\n  return async dispatch => {\n    try {\n      dispatch(setIsLoadinSelectedType(true));\n      const response = await axios.get(ModelUrls.TYPES + '/' + id); //console.log(response.data);\n      //запись в стейт\n\n      dispatch(setSelectedType(response.data));\n    } catch (e) {\n      console.log(e);\n      dispatch(setFetchErrorSelectedType(true));\n      dispatch(setIsLoadinSelectedType(false));\n    }\n  };\n}; // получение брэндов и запись в стейт\n\nexport const getBrands = () => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(ModelUrls.BRANDS); // console.log(response);\n      //запись в стейт\n\n      dispatch(setBrands(response.data));\n    } catch (e) {\n      console.log(e);\n      dispatch(setFetchErrorBrands(true));\n    }\n  };\n}; // добавление устройства в базу данных ,обнуление стейта addedDevice,переход на главную страницу\n\nexport const addDevice = (data, history) => {\n  //чтобы обнулить стейт\n  const copyAddedDevice = {\n    name: '',\n    price: '',\n    picture: [],\n    info: [],\n    typeId: '',\n    brandId: ''\n  };\n  return async dispatch => {\n    try {\n      const response = await axios.post(ModelUrls.DEVICES, data); // console.log(response);\n\n      dispatch(setAddedDeviceError(false)); //обнуляем добавленное устройство в стейте\n\n      dispatch(setAddedDevice(copyAddedDevice));\n      dispatch(getTypes());\n      history.push('/');\n    } catch (e) {\n      console.log(e);\n      dispatch(setAddedDeviceError(true));\n    }\n  };\n}; // добавление типа устройства в базу данных\n\nexport const addType = (data, handleClose) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(ModelUrls.TYPES, data);\n      dispatch(setAddedDeviceError(false));\n      console.log(response);\n      dispatch(getTypes());\n      handleClose();\n    } catch (e) {\n      console.log(e);\n      dispatch(setAddedDeviceError(true));\n    }\n  };\n}; // добавление брэнда устройства в базу данных\n\nexport const addBrand = (data, handleClose) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(ModelUrls.BRANDS, data);\n      dispatch(setAddedDeviceError(false));\n      console.log(response);\n      dispatch(getBrands());\n      handleClose();\n    } catch (e) {\n      console.log(e);\n      dispatch(setAddedDeviceError(true));\n    }\n  };\n}; // удаление  устройства\n\nexport const removeDevice = id => {\n  console.log(id);\n  return async dispatch => {\n    try {\n      const response = await axios.delete(ModelUrls.DEVICES + '/' + id);\n      window.location.reload();\n    } catch (e) {\n      console.log(e);\n    }\n  };\n}; // удаление типа устройства\n\nexport const removeType = id => {\n  console.log(id);\n  return async dispatch => {\n    try {\n      const response = await axios.delete(ModelUrls.TYPES + '/' + id); // console.log(response);\n\n      if (response.data.message) {\n        dispatch(setAlertMessage(response.data.message));\n      }\n\n      dispatch(getTypes());\n    } catch (e) {\n      console.log(e);\n    }\n  };\n}; // удаление брэнда устройства\n\nexport const removeBrand = id => {\n  console.log(id);\n  return async dispatch => {\n    try {\n      const response = await axios.delete(ModelUrls.BRANDS + '/' + id); // console.log(response);\n\n      if (response.data.message) {\n        dispatch(setAlertMessage(response.data.message));\n      }\n\n      dispatch(getBrands());\n      dispatch(getTypes());\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};","map":{"version":3,"sources":["D:/Fullstack/online-store/client/src/action/deviceAction.ts"],"names":["setIsLoadinDevice","setIsLoadinSelectedDevice","setIsLoadinTypes","setIsLoadinSelectedType","setFetchErrorDevice","setFetchErrorSelectedDevice","setFetchErrorTypes","setFetchErrorSelectedType","setFetchErrorBrands","setDevices","setSelectedDevice","setTypes","setSelectedType","setBrands","setPageQty","setAddedDevice","setAddedDeviceError","setAlertMessage","axios","ModelUrls","getDevices","typeId","brandId","limit","page","name","setPage","history","dispatch","response","get","DEVICES","params","data","pageQty","replace","location","pathname","device","e","console","log","getSelectedDevice","id","getTypes","TYPES","getSelectedType","getBrands","BRANDS","addDevice","copyAddedDevice","price","picture","info","post","push","addType","handleClose","addBrand","removeDevice","delete","window","reload","removeType","message","removeBrand"],"mappings":"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","sourcesContent":["import {\r\n  setIsLoadinDevice, //крутилка для устройств\r\n  setIsLoadinSelectedDevice, //крутилка для выбранного устройства\r\n  setIsLoadinTypes, //крутилка для типов\r\n  setIsLoadinSelectedType, //крутилка для выбранного типа\r\n  setFetchErrorDevice, //ошибка для устройств\r\n  setFetchErrorSelectedDevice, //ошибка для выбранного утсройства\r\n  setFetchErrorTypes, //ошибка для типов\r\n  setFetchErrorSelectedType, //ошибка для выбранного типа\r\n  setFetchErrorBrands, //ошибка загрузки брэндов\r\n  setDevices, // запись устройств в стейт\r\n  setSelectedDevice, // запись выбранного устройства в стейт\r\n  setTypes, // запись типов в стейт\r\n  setSelectedType, //запись выбранного типа устройства в стейт\r\n  setBrands, // запись брэндов\r\n  setPageQty, // запись количества страниц в стейт\r\n  addedDeviceType, //типизация добавленного устройства\r\n  setAddedDevice, // запись добавленного устройства в стейт\r\n  setAddedDeviceError, // изменения статуса ошибки добавленного устройства\r\n  setAlertMessage, // изменения маркера получения сообщения о невозможности удаления типа/брэнда устройства\r\n} from './../store/reducer/deviceReducer';\r\nimport axios from 'axios';\r\nimport { ThunkAction } from 'redux-thunk'; // для типизации санки\r\nimport { RootStateType } from '../store/store'; //типизация всего стора\r\nimport { ModelUrls } from '../constants/url';\r\nimport { DeviceAtionType } from '../store/reducer/deviceReducer'; //типизация экшенов устройств\r\n\r\n// типизация санки\r\nexport type ThunkType = ThunkAction<\r\n  Promise<void>,\r\n  RootStateType,\r\n  unknown, //extraArgument\r\n  DeviceAtionType\r\n>;\r\n// получение выбранных устройств и запись в стейт\r\nexport const getDevices = (\r\n  typeId: string | null,\r\n  brandId: string | null,\r\n  limit: number,\r\n  page: number,\r\n  name: string | null,\r\n  setPage: React.Dispatch<React.SetStateAction<number>>,\r\n  history: any\r\n): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch(setIsLoadinDevice(true));\r\n      const response = await axios.get(`${ModelUrls.DEVICES}`, {\r\n        params: {\r\n          typeId,\r\n          brandId,\r\n          limit,\r\n          page,\r\n          name,\r\n        },\r\n      });\r\n      // console.log(response);\r\n      //если число страниц меньше активной страницы,текущую страницу ставим 1\r\n      if (response.data.pageQty < page) {\r\n        setPage(1); //записываем текущую страницу в локальный стейт\r\n        history.replace(\r\n          `${\r\n            history.location.pathname === '/deleteContainer'\r\n              ? '/deleteContainer'\r\n              : `${history.location.pathname}`\r\n          }?page=1`\r\n        );\r\n      }\r\n      //запись в стейт\r\n      dispatch(setDevices(response.data.device));\r\n      dispatch(setPageQty(response.data.pageQty));\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setFetchErrorDevice(true));\r\n      dispatch(setIsLoadinDevice(false));\r\n    }\r\n  };\r\n};\r\n// получение выбранного устройства\r\nexport const getSelectedDevice = (id: string): ThunkType => {\r\n  //console.log(id);\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch(setIsLoadinSelectedDevice(true));\r\n      const response = await axios.get(ModelUrls.DEVICES + '/' + id);\r\n      //запись в стейт\r\n      dispatch(setSelectedDevice(response.data));\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setFetchErrorSelectedDevice(true));\r\n      dispatch(setIsLoadinSelectedDevice(false));\r\n    }\r\n  };\r\n};\r\n\r\n// получение типов устройств и запись в стейт\r\nexport const getTypes = (): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch(setIsLoadinTypes(true));\r\n      const response = await axios.get(ModelUrls.TYPES);\r\n      // console.log(response);\r\n      //запись в стейт\r\n      dispatch(setTypes(response.data));\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setFetchErrorTypes(true));\r\n      dispatch(setIsLoadinTypes(false));\r\n    }\r\n  };\r\n};\r\n// получение типа выбранного устройства\r\nexport const getSelectedType = (id: string): ThunkType => {\r\n  //console.log(id);\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch(setIsLoadinSelectedType(true));\r\n      const response = await axios.get(ModelUrls.TYPES + '/' + id);\r\n      //console.log(response.data);\r\n      //запись в стейт\r\n      dispatch(setSelectedType(response.data));\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setFetchErrorSelectedType(true));\r\n      dispatch(setIsLoadinSelectedType(false));\r\n    }\r\n  };\r\n};\r\n// получение брэндов и запись в стейт\r\nexport const getBrands = (): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.get(ModelUrls.BRANDS);\r\n      // console.log(response);\r\n      //запись в стейт\r\n      dispatch(setBrands(response.data));\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setFetchErrorBrands(true));\r\n    }\r\n  };\r\n};\r\n// добавление устройства в базу данных ,обнуление стейта addedDevice,переход на главную страницу\r\nexport const addDevice = (data: any, history: any): ThunkType => {\r\n  //чтобы обнулить стейт\r\n  const copyAddedDevice: addedDeviceType = {\r\n    name: '',\r\n    price: '',\r\n    picture: [],\r\n    info: [],\r\n    typeId: '',\r\n    brandId: '',\r\n  };\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.post(ModelUrls.DEVICES, data);\r\n      // console.log(response);\r\n      dispatch(setAddedDeviceError(false));\r\n      //обнуляем добавленное устройство в стейте\r\n      dispatch(setAddedDevice(copyAddedDevice));\r\n      dispatch(getTypes());\r\n      history.push('/');\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setAddedDeviceError(true));\r\n    }\r\n  };\r\n};\r\n// добавление типа устройства в базу данных\r\nexport const addType = (\r\n  data: { name: string },\r\n  handleClose: () => void\r\n): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.post(ModelUrls.TYPES, data);\r\n      dispatch(setAddedDeviceError(false));\r\n      console.log(response);\r\n      dispatch(getTypes());\r\n      handleClose();\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setAddedDeviceError(true));\r\n    }\r\n  };\r\n};\r\n// добавление брэнда устройства в базу данных\r\nexport const addBrand = (\r\n  data: { name: string },\r\n  handleClose: () => void\r\n): ThunkType => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.post(ModelUrls.BRANDS, data);\r\n      dispatch(setAddedDeviceError(false));\r\n      console.log(response);\r\n      dispatch(getBrands());\r\n      handleClose();\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(setAddedDeviceError(true));\r\n    }\r\n  };\r\n};\r\n// удаление  устройства\r\nexport const removeDevice = (id: string | undefined): ThunkType => {\r\n  console.log(id);\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.delete(ModelUrls.DEVICES + '/' + id);\r\n      window.location.reload();\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n// удаление типа устройства\r\nexport const removeType = (id: string): ThunkType => {\r\n  console.log(id);\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.delete(ModelUrls.TYPES + '/' + id);\r\n      // console.log(response);\r\n      if (response.data.message) {\r\n        dispatch(setAlertMessage(response.data.message));\r\n      }\r\n      dispatch(getTypes());\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n// удаление брэнда устройства\r\nexport const removeBrand = (id: string): ThunkType => {\r\n  console.log(id);\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await axios.delete(ModelUrls.BRANDS + '/' + id);\r\n      // console.log(response);\r\n      if (response.data.message) {\r\n        dispatch(setAlertMessage(response.data.message));\r\n      }\r\n      dispatch(getBrands());\r\n      dispatch(getTypes());\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}